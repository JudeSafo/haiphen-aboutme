/* site-header.css */

:root{
  --hdr-bg: rgba(255,255,255,.72);
  --hdr-border: rgba(15,23,42,.10);
  --hdr-text: #0f172a;
  --hdr-muted: rgba(15,23,42,.70);
  --hdr-accent: #2563eb; /* tasteful blue */
  --hdr-shadow: 0 12px 30px rgba(2, 6, 23, 0.10);
  --menu-shadow: 0 18px 50px rgba(2, 6, 23, 0.16);
}

.site-header{
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1500;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  background: var(--hdr-bg);
  border-bottom: 1px solid var(--hdr-border);
}

.site-header__inner{
  max-width: 1180px;
  margin: 0 auto;
  height: 64px;
  padding: 0 16px;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 16px;
}

/* Left zone (hamburger + brand) */
.site-header__left{
  display: flex;
  align-items: center;
  gap: 8px;
  justify-self: start;
}

/* Brand */
.site-header__brand{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  border-radius: 12px;
  padding: 8px;
  outline: none;
}
.site-header__brand:focus-visible{
  box-shadow: 0 0 0 3px rgba(37,99,235,.22);
}
.site-header__logo{
  height: 34px;
  width: auto;
  display: block;
}

/* Menu (grid column 2 — always viewport-centered) */
.site-header__menu{
  justify-self: center;
  display: flex;
  justify-content: center;
}
.site-header__items{
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px;
  border-radius: 999px;
  background: var(--nav-pill-bg, rgba(252, 234, 238, 0.72));
  border: 1px solid rgba(15,23,42,.08);
}

/* Menu item / link */
.site-header__item{
  position: relative;
  display: flex;
  align-items: center;
}

.site-header__link{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: 999px;
  text-decoration: none;
  color: var(--hdr-text);
  font: 600 13px/1.0 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  letter-spacing: .2px;
  transition: background .15s ease, color .15s ease;
  user-select: none;
  outline: none;
}

.site-header__link:hover{
  background: rgba(15,23,42,.06);
}

.site-header__item:hover .site-header__link,
.site-header__item:focus-within .site-header__link{
  background: rgba(37,99,235,.10);
  color: var(--hdr-text);
}

/* Dropdown (IMPORTANT: open on item hover/focus-within, NOT link hover) */
.site-header__dropdown{
  position: absolute;
  top: calc(100% + 10px);
  left: 50%;
  transform: translateX(-50%) translateY(-6px);
  min-width: 220px;
  padding: 8px;
  border-radius: 14px;
  background: rgba(255,255,255,0.96);
  border: 1px solid rgba(15,23,42,.10);
  box-shadow: var(--menu-shadow);
  opacity: 0;
  visibility: hidden;
  pointer-events: none; /* prevents "dead hover zones" when hidden */
  transition: opacity .14s ease, transform .14s ease, visibility .14s ease;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* Force-close dropdown after a nav click (overrides :hover/:focus-within) */
.site-header__item.is-dismissed .site-header__dropdown {
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

.site-header__item:hover .site-header__dropdown,
.site-header__item:focus-within .site-header__dropdown{
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateX(-50%) translateY(0);
}

/* Give the dropdown a little “hover bridge” so moving down doesn’t flicker */
.site-header__dropdown::before{
  content: "";
  position: absolute;
  top: -10px;
  left: 0;
  right: 0;
  height: 12px;
}

/* Dropdown links */
.site-header__drop-link{
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 10px;
  text-decoration: none;
  color: var(--hdr-text);
  font: 500 13px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  transition: background .12s ease;
}

.site-header__drop-link:hover{
  background: rgba(15,23,42,.06);
}

.site-header__icon{
  width: 16px;
  height: 16px;
  display: block;
  opacity: .9;
}

/* Session area (grid column 3 — right-aligned) */
.site-header__session{
  justify-self: end;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* If your login button class is used site-wide, keep this modest */
.site-header .login-btn{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 9px 14px;
  border-radius: 999px;
  border: none;
  text-decoration: none;
  font: 700 13px/1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color: white;
  background: linear-gradient(180deg, rgba(37,99,235,1), rgba(29,78,216,1));
  box-shadow: 0 10px 22px rgba(37,99,235,.22);
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
.site-header .login-btn:hover{
  transform: translateY(-1px);
  filter: brightness(1.02);
  box-shadow: 0 14px 28px rgba(37,99,235,.28);
}

/* Hamburger button (hidden on desktop) */
.site-header__hamburger{
  display: none;
  appearance: none;
  background: none;
  border: none;
  cursor: pointer;
  padding: 6px;
  border-radius: 8px;
  flex: 0 0 auto;
  width: 32px;
  height: 32px;
  position: relative;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 4px;
}

.site-header__hamburger span{
  display: block;
  width: 18px;
  height: 2px;
  background: var(--hdr-text);
  border-radius: 2px;
  transition: transform .2s ease, opacity .2s ease;
}

.site-header__hamburger:hover{
  background: rgba(15,23,42,.06);
}

/* X state when sidebar is open */
.site-header__hamburger[aria-expanded="true"] span:nth-child(1){
  transform: translateY(6px) rotate(45deg);
}
.site-header__hamburger[aria-expanded="true"] span:nth-child(2){
  opacity: 0;
}
.site-header__hamburger[aria-expanded="true"] span:nth-child(3){
  transform: translateY(-6px) rotate(-45deg);
}

/* Mobile */
@media (max-width: 920px){
  .site-header__hamburger{
    display: inline-flex;
  }
}

@media (max-width: 860px){
  .site-header__menu{ display:none; }
}

/* --- Session dropdown --- */
.session-menu{
  position: relative;
  display: inline-flex;
  align-items: center;
}

.session-pill{
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(15,23,42,.12);
  background: rgba(255,255,255,.70);
  color: var(--hdr-text);
  font: 800 13px/1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  cursor: pointer;
  user-select: none;
  outline: none;
}

.session-pill:hover{
  background: rgba(15,23,42,.04);
}

.session-pill:focus-visible{
  box-shadow: 0 0 0 3px rgba(37,99,235,.22);
}

.session-avatar{
  width: 22px;
  height: 22px;
  border-radius: 999px;
  object-fit: cover;
  border: 1px solid rgba(15,23,42,.12);
}

.session-dropdown{
  position: absolute;
  top: calc(100% + 10px);
  right: 0;
  min-width: 360px;
  padding: 10px;
  border-radius: 14px;
  background: var(--surface-2);
  border: 1px solid rgba(15,23,42,.10);
  box-shadow: var(--menu-shadow);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transform: translateY(-6px);
  transition: opacity .14s ease, transform .14s ease, visibility .14s ease;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 2000;
}

/* open on hover OR keyboard focus within */
.session-menu:hover .session-dropdown,
.session-menu:focus-within .session-dropdown{
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateY(0);
}

.session-dropdown::before{
  content:"";
  position:absolute;
  top:-10px;
  left:0;
  right:0;
  height:12px;
}

.session-tabs{
  display:flex;
  gap:8px;
  padding: 4px;
  background: rgba(15,23,42,.04);
  border: 1px solid rgba(15,23,42,.08);
  border-radius: 12px;
}

.session-tab{
  flex: 1;
  appearance: none;
  border: 1px solid transparent;
  background: transparent;
  color: var(--hdr-text);
  font: 800 12px/1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  padding: 10px 10px;
  border-radius: 10px;
  cursor: pointer;
}

.session-tab[aria-selected="true"]{
  background: rgba(255,255,255,.90);
  border-color: rgba(15,23,42,.10);
  box-shadow: 0 8px 24px rgba(2,6,23,.08);
}

/* --- Structured session dropdown --- */
.session-dropdown__identity{
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 10px 8px;
}

.session-dropdown__avatar{
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid rgba(15,23,42,.12);
  object-fit: cover;
  flex: 0 0 auto;
}

.session-dropdown__info{
  min-width: 0;
}

.session-dropdown__name{
  font-weight: 950;
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.session-dropdown__meta{
  opacity: .7;
  font-weight: 700;
  font-size: 11px;
  margin-top: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.session-dropdown__plan{
  display: inline-block;
  margin-top: 4px;
  font-size: 10px;
  font-weight: 900;
  padding: 2px 7px;
  border-radius: 999px;
  background: rgba(90,155,212,.12);
  border: 1px solid rgba(90,155,212,.22);
  color: #1d6fb5;
}

.session-dropdown__divider{
  height: 1px;
  background: rgba(15,23,42,.08);
  margin: 6px 0;
}

.session-dropdown__nav{
  display: grid;
  gap: 2px;
  padding: 4px 0;
}

.session-dropdown__link{
  display: block;
  padding: 9px 12px;
  border-radius: 10px;
  font-weight: 800;
  font-size: 12px;
  color: var(--hdr-text);
  text-decoration: none;
  transition: background .12s ease;
}

.session-dropdown__link:hover{
  background: rgba(15,23,42,.05);
  text-decoration: none;
}

.session-dropdown__actions{
  padding: 4px 0;
}

.session-dropdown__logout{
  appearance: none;
  width: 100%;
  padding: 9px 12px;
  border-radius: 10px;
  border: 1px solid rgba(15,23,42,.08);
  background: rgba(255,255,255,.55);
  font-weight: 800;
  font-size: 12px;
  color: var(--hdr-text);
  cursor: pointer;
  text-align: left;
  transition: background .12s ease;
}

.session-dropdown__logout:hover{
  background: rgba(239,68,68,.06);
}

/* --- Dual login buttons --- */
.session-login-buttons{
  display: flex;
  gap: 8px;
  align-items: center;
}

.session-login-btn{
  display: inline-flex;
  align-items: center;
  gap: 7px;
  padding: 8px 14px;
  border-radius: 999px;
  font: 700 12px/1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  text-decoration: none;
  transition: transform .12s ease, box-shadow .12s ease;
  white-space: nowrap;
}

.session-login-btn:hover{
  transform: translateY(-1px);
  text-decoration: none;
}

.session-login-btn--github{
  background: #24292f;
  color: #fff;
  border: 1px solid #24292f;
  box-shadow: 0 6px 16px rgba(36,41,47,.22);
}

.session-login-btn--github:hover{
  box-shadow: 0 10px 22px rgba(36,41,47,.30);
}

.session-login-btn--google{
  background: #fff;
  color: #3c4043;
  border: 1px solid rgba(15,23,42,.15);
  box-shadow: 0 6px 16px rgba(0,0,0,.08);
}

.session-login-btn--google:hover{
  box-shadow: 0 10px 22px rgba(0,0,0,.14);
}

@media (max-width: 860px){
  .session-login-buttons{
    flex-direction: column;
    gap: 6px;
  }
  .session-login-btn{
    font-size: 11px;
    padding: 7px 10px;
  }
}

.session-panel{
  margin-top: 10px;
}

/* tighten api-cred for dropdown */
.session-dropdown .api-cred{
  margin-top: 0;
  padding: 12px;
  border-radius: 14px;
}

/* ============================================================
   Finance lens — dark charcoal blue header overrides
   ============================================================ */

html[data-lens="finance"] .site-header {
  background: rgba(15,23,42,0.97);
  border-bottom-color: rgba(148,163,184,0.15);
}

html[data-lens="finance"] .site-header__link {
  color: #f8fafc;
}

html[data-lens="finance"] .site-header__link:hover {
  background: rgba(90,155,212,0.10);
}

html[data-lens="finance"] .site-header__item:hover .site-header__link,
html[data-lens="finance"] .site-header__item:focus-within .site-header__link {
  background: rgba(90,155,212,0.14);
  color: #f8fafc;
}

html[data-lens="finance"] .site-header__dropdown {
  background: rgba(15,23,42,0.97);
  border-color: rgba(148,163,184,0.20);
}

html[data-lens="finance"] .site-header__drop-link {
  color: #e2e8f0;
}

html[data-lens="finance"] .site-header__drop-link:hover {
  background: rgba(90,155,212,0.12);
}

html[data-lens="finance"] .site-header__items {
  background: var(--nav-pill-bg);
  border-color: rgba(148,163,184,0.15);
}

html[data-lens="finance"] .site-header__hamburger span {
  background: #f8fafc;
}

html[data-lens="finance"] .session-pill {
  background: rgba(51,65,85,0.7);
  border-color: rgba(148,163,184,0.20);
  color: #f8fafc;
}

html[data-lens="finance"] .session-pill:hover {
  background: rgba(90,155,212,0.14);
}

html[data-lens="finance"] .session-dropdown {
  background: rgba(15,23,42,0.97);
  border-color: rgba(148,163,184,0.20);
}

html[data-lens="finance"] .session-dropdown__name,
html[data-lens="finance"] .session-dropdown__link {
  color: #f8fafc;
}

html[data-lens="finance"] .session-dropdown__link:hover {
  background: rgba(90,155,212,0.10);
}

html[data-lens="finance"] .session-dropdown__logout {
  background: rgba(51,65,85,0.55);
  border-color: rgba(148,163,184,0.15);
  color: #f8fafc;
}

html[data-lens="finance"] .session-dropdown__logout:hover {
  background: rgba(239,68,68,0.14);
}

html[data-lens="finance"] .session-dropdown__divider {
  background: rgba(148,163,184,0.15);
}

html[data-lens="finance"] .session-tabs {
  background: rgba(148,163,184,0.06);
  border-color: rgba(148,163,184,0.12);
}

html[data-lens="finance"] .session-tab {
  color: #e2e8f0;
}

html[data-lens="finance"] .session-tab[aria-selected="true"] {
  background: rgba(51,65,85,0.8);
  border-color: rgba(148,163,184,0.20);
}

html[data-lens="finance"] .site-header__icon {
  filter: brightness(0) invert(1);
}

